<h1>List of Users</h1>

<% categories = User.all.map {|t| t.category}.uniq %>

<% categories.each do |category| %>

  <h3><%= category.capitalize %></h3>
  <div class="driver container-lg">

  <table class="table table-hover">
  <thead>
  <tr>
  <th>Username</th>
  <th>User's Votes</th>
  <th>User Joined On</th>
  </tr>
  <thead>

  <tbody>
    <% User.where(:category => category).order('title').each do |user|  %>
        <tr data-path="<%= user_path(user)%>" >
          <td><%= user.name %></td>
          <!--TODO: Resolve remaining fields
          <%# <td><%= user.votes %></td> %>
          <%# <td><%= user.joined_on %></td> %>
        </tr>
    <% end %>
  </tbody>
  </table>

  </div>

<% end %>

<%= link_to "Add User", new_user_path %>